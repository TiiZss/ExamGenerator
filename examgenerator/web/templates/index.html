{% extends "base.html" %}

{% block content %}
<div class="card">
    <h2>Â¡Bienvenido a ExamGenerator!</h2>
    <p>Sistema completo para generaciÃ³n de exÃ¡menes aleatorios con soporte de inteligencia artificial.</p>
</div>

<div class="grid">
    <div class="card feature">
        <div class="feature-icon">ğŸ“‹</div>
        <h3>Generar ExÃ¡menes</h3>
        <p>Crea exÃ¡menes aleatorios desde un archivo de preguntas existente.</p>
        <br>
        <a href="{{ url_for('generate_exams') }}" class="btn">Comenzar</a>
    </div>
    
    <div class="card feature">
        <div class="feature-icon">ğŸ¤–</div>
        <h3>IA - Generar Preguntas</h3>
        <p>Genera preguntas automÃ¡ticamente desde PDFs, DOCX o PPTX usando IA.</p>
        <br>
        <a href="{{ url_for('generate_questions') }}" class="btn">Comenzar</a>
    </div>
</div>

<div class="card" style="margin-top: 30px;">
    <h2>âœ¨ CaracterÃ­sticas</h2>
    <ul style="list-style: none; padding-left: 0;">
        <li style="padding: 10px 0;">âœ… GeneraciÃ³n determinÃ­stica (mismas preguntas = mismo orden)</li>
        <li style="padding: 10px 0;">âœ… MÃºltiples formatos de exportaciÃ³n (TXT, DOCX, PDF, Excel)</li>
        <li style="padding: 10px 0;">âœ… Soporte para plantillas DOCX personalizadas</li>
        <li style="padding: 10px 0;">âœ… IA dual: Google Gemini y Ollama local</li>
        <li style="padding: 10px 0;">âœ… CachÃ© inteligente para preguntas de IA</li>
        <li style="padding: 10px 0;">âœ… EstadÃ­sticas y anÃ¡lisis de exÃ¡menes</li>
        <li style="padding: 10px 0;">âœ… Interfaz web y CLI</li>
    </ul>
</div>

<div class="card">
    <h2>ğŸ“Š EstadÃ­sticas del CachÃ©</h2>
    <div id="cache-stats">
        <p>Cargando...</p>
    </div>
    <br>
    <form method="POST" action="{{ url_for('clear_cache') }}" style="display: inline;">
        <button type="submit" onclick="return confirm('Â¿Limpiar todo el cachÃ©?')">
            ğŸ—‘ï¸ Limpiar CachÃ©
        </button>
    </form>
</div>

<script>
    // Cargar estadÃ­sticas del cachÃ©
    fetch('/cache/stats')
        .then(response => response.json())
        .then(data => {
            document.getElementById('cache-stats').innerHTML = `
                <p><strong>Entradas en cachÃ©:</strong> ${data.total_entries}</p>
                <p><strong>TamaÃ±o total:</strong> ${data.total_size_mb.toFixed(2)} MB</p>
                <p><strong>Directorio:</strong> ${data.cache_dir}</p>
            `;
        })
        .catch(error => {
            document.getElementById('cache-stats').innerHTML = '<p>Error cargando estadÃ­sticas</p>';
        });
</script>
{% endblock %}
